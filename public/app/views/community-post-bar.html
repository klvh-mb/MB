<div id="content-uploader" class="general-box tab-content">
    <ul ng-show="community.isM == true || community.isO == true" style="padding:5px;">
        <li style="margin:0px;">
            <!--a id="upload-post" style="float:left"><b><span class="icon-title-uploader-writePost"></span>Write Posts </b></a>
            <span class="divider-cus"></span-->
            <a id="upload-image"><span class="icon-title-uploader-upImage" ></span><b data-ng-show="selectedFiles.length < 3" data-ng-click="postPhoto()">相片</b></a>
        </li>
        <li>
            <form id="content-upload-wrapper" name="content-upload-wrapper" class="no-margin no-padding" method="post" action="" >
            <textarea cols="45" rows="2" name="content-upload-input" id="content-upload-input" class="post-input-body inputBoxFocus form-control" placeholder="分享些東西吧⋯⋯" data-ng-model="postText"></textarea>
            
            
				<div style="background-color: white;" ng-show="selectedFiles != null">
					<img ng-class="{partial_fade: hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false" 
						ng-repeat="f in selectedFiles" tooltip-placement="bottom" tooltip="Remove this photo" style="width: 100px;height: 100px;" data-ng-click="remove_image($index)"
								ng-show="dataUrls[$index]" ng-src="{{dataUrls[$index]}}">
				</div>
				<div>
				<i data-ng-show="selectedFiles.length < 3" data-ng-click="postPhoto()"></i>
					<button  data-ng-show="postText.length > 2" type="button" class="btn btn-warning btn-xs" data-ng-click="post_on_community(community.id, postText); postText='';">Post</button>
					<input style="visibility:hidden;height:0px;" id="post-photo-id" type="file"  name="post-photo" ng-file-select="onFileSelect($files)"/>
				</div>
            </form>
        </li>
    </ul>
</div>

<div infinite-scroll='nextPost()' infinite-scroll-disabled='isBusy' infinite-scroll-distance='0' >	
    <div data-ng-repeat="post in community.posts">
        <div id="wall-forum">
    		<div class="general-box">
        		<div>
        			<ul>
        	            <li><a data-ng-href="/#/profile/{{post.oid}}" ><img class="wall-userpic" data-ng-src="/get-mini-image-by-id/{{post.oid}}"/></a><p class="wall-user-actState"><a data-ng-href="/#/profile/{{post.oid}}" style="color: #428bca !important;">{{post.p}}</a><span class="wall-user-actState-from"></span><a data-ng-href="/#/community/{{post.cid}}/moment" style="color: #428bca !important;">{{post.cn}}</a><span class="wall-user-actState-share"></span><span class="sharing-tag pull-right">åˆ†äº«</span></p>
        	            	<span class="wall-user-actState-date" am-time-ago="post.t"></span>
        	              <a data-ng-show="!post.isBookmarked" class="btn-like post-favorite" href="" data-ng-click="bookmarkPost(post.id)"></a>
        	              <a data-ng-show="post.isBookmarked" class="btn-like post-favorited" href="" data-ng-click="unBookmarkPost(post.id)"></a>
        	            </li>
        	            <li><span style="white-space: pre-wrap;" ng-bind-html="post.pt| highlight: highlightText" class="wall-user-post-text"></span></li>
        	            <li><div data-ng-show="post.hasImage" class="wall-user-post-image">
        						<a data-toggle="modal" data-target="#imageModal" data-ng-repeat="imageID in post.imgs" href="">
        							<img width="75" data-ng-src="/get-post-image-by-id/{{imageID}}" data-ng-click="showImage(imageID)" alt="">
        						</a>
        				   </div>
        				</li>
        				<li>
        				    <span class="btn-like-wrapper">
                                <a data-ng-show="!post.isLike" class="btn-like" href="" data-ng-click="like_post(post.id)"><img data-ng-src="/assets/app/images/general/icons/like_1.gif"/>Like</a> 
                                <a data-ng-show="post.isLike" class="btn-like" href="" data-ng-click="unlike_post(post.id)"><img data-ng-src="/assets/app/images/general/icons/liked_1.gif"/>Unlike</a>
                                <span ng-show="post.nol > 0"> · {{post.nol}}</span>
                                <span ng-show="post.isLike"> · 你對這讚好</span>
                            </span>
                        </li>
               		</ul>
           		</div>
    		   	<ul id="postCommentsSection" class="wall-user-post-respond" style="padding:0px; margin:0px;">
    	             <li ng-show="post.n_c > 3" data-ng-click="get_all_comments(post.id)"><a href="">View all</a></li>
    	             <ul>
                        <li data-ng-repeat="comment in post.cs">
                            <a data-ng-href="/#/profile/{{comment.oid}}" >
                               <img class="wall-userpic" data-ng-src="/get-comment-mini-image-by-id/{{comment.oid}}"/>
                            </a>
                            <div>
                                <p class="user-comment">
                                    <a class="commentUsername" href="/#/profile/{{comment.oid}}">{{comment.on}}</a>
                                    <span class="wall-user-actState-date" am-time-ago="comment.cd"></span>
                                </p>
                                <span class="commentText">{{comment.d}}</span>
                                
                                <div class="wall-user-post-image">
    								<a data-toggle="modal" data-target="#imageModal" data-ng-repeat="imageID in comment.imgs" href="">
    									<img width="90" data-ng-src="/get-comment-image-by-id/{{imageID}}" data-ng-click="showImage(imageID)" alt="">
    								</a>
    						   </div>
    				
                                <span class="btn-like-wrapper">
                                    <a data-ng-show="!comment.isLike" class="btn-like" href="" data-ng-click="like_comment(post.id,comment.id)"><img data-ng-src="/assets/app/images/general/icons/like_1.gif"/>Like</a> 
                                    <a data-ng-show="comment.isLike" class="btn-like" href="" data-ng-click="unlike_comment(post.id,comment.id)"><img data-ng-src="/assets/app/images/general/icons/liked_1.gif"/>Unlike</a>
                                    <span ng-show="comment.nol > 0"> · {{comment.nol}}</span>
                                    <span ng-show="comment.isLike"> · 你對這讚好</span>
                                </span>
                            </div>
                        </li>
                        <li ng-show="community.isM == true || community.isO == true">
                            <img class="wall-userpic" data-ng-src="/get-comment-mini-image-by-id/{{userInfo.id}}"/>
                            <form id="userCommentwrapper" name="userComment">
                                <label for="User Comment"></label>
                                <span class="row">
                                	<textarea type="text" name="userCommentfield" id="userCommentfield" class="general-textfield commentBox"  placeholder="Write a comment..." style="width: 82%;" cols="80" data-ng-model="commentText" rows="1"></textarea>
                                	<a data-ng-hide="commentSelectedFiles.length > 2 && commentedOnPost == post.id" id="upload" class="col-sm-1" style="float: right;"><i class="fa fa-2x icon-photo-camera-fill" data-ng-click="commentPhoto(post.id)"></i></a>
                                	<input style="visibility:hidden;height:0px;" id="comment-photo-id" type="file"  name="comment-photo" ng-file-select="onCommentFileSelect($files)"/>
                                </span>
                                
                                <span ng-if="commentedOnPost == post.id">
                                	<div style="background-color: white;" ng-show="commentSelectedFiles != null">
    									<img ng-class="{partial_fade: hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false" 
    										ng-repeat="f in commentSelectedFiles" tooltip-placement="bottom" tooltip="Remove this photo" style="width: 100px;height: 100px;" data-ng-click="remove_image_from_comment($index)"
    										ng-show="commentDataUrls[$index]" ng-src="{{commentDataUrls[$index]}}">
    								</div>
                                </span>
                                <span data-ng-show="commentText.length>1"  class="pull-right" style="margin-top:1.5%;">
                                <i class="icon-reply-all-fill fa fa-2x " data-ng-click="comment_on_post(post.id, commentText); commentText='';"></i></span>
                            </form>
                        </li>
    	              </ul>
    	         </ul>
    		</div>
    	</div>
    </div>
    <span ng-show="isBusy" spinner-start-active="1" us-spinner="{top: 'inherit'}" ></span>
</div>