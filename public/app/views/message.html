
 <header>
		<div data-ng-include style="width: 100%;height: 50px;" data-src="'/assets/app/views/headerBar.html'"></div>
	</header>
    <div class="themeA-container">
        <div class="row">
        <div class="col-md-8 col-sm-8 col-xs-8 col-md-offset-2 col-sm-offset-2 col-xs-offset-2">
            <div id="message-box" class="general-box">
                <div id="message-list">
                    <div class="con-title">Messages</div>
                    <!-- <div id="message-search">
                        <form id="message-searchwrapper" name="message-search" method="post" action="">
                            <label for="Search Message"></label>
                            <input type="text" name="message-searchfield" id="message-searchfield" placeholder="æ�œå°‹" />
                            <input id="message-search-icon" name="message-search-icon" type="submit" value=" " class="icon-box icon-title-search" />
                        </form>
                    </div> -->
                    <ul stule="overflow-y:scroll;">
                        <li id="conversation" data-ng-class="selectedIndex == $index   ? 'message-list-active' : conv.isReaded == true ? 'message-list-unread' :'message-list-read' "  data-ng-repeat="conv in conversations" data-ng-click="getMessages(conv.id, conv.uid); setSelectedIndex($index)">
                            <img data-ng-src="/get-mini-image-by-id/{{conv.uid}}" style="height:50px;">
                            <div><h5>{{conv.nm}}</h5><p>{{conv.lm}}</p></div>
                            <div><p> <span class="wall-user-actState-date" >{{ conv.cd| date:'hh:mm'}}</span></p><a href="#" class="message-notice">49</a></div>
                        </li>
                    </ul>
                </div>
                <div id="message-content">
                    <div class="con-title">Messages
                        <div class="pull-right">
                        <form method="post" action="">
					        <div id="main-search-box" name="main-search-box" class="pull-right" >
					            <a id="main-search-wrapper" class="ng-pristine ng-valid">
					                <div class="input-group innerB main-search">
					                    <input type="text" name="searchfield" id="searchfield" class="form-control" ng-model="name" data-ng-keyup="search_friend(name)" placeholder="Start New Chat">
					                    <div class="input-group-btn">
					                       <button id="submit-search" name="submit" class="btn btn-default" type="submit">
					                           <i class="fa fa-search"></i>
					                       </button>
					                    </div>
					                </div>
					            </a>
					            
					            <div class="row">
					                <ul style="top:23px;left:5px;overflow-y:scroll;max-height:345px;width:260px;position:initial;z-index:1000" class="dropdown-menu chat media-list hide" ng-class="{show : searchResult.length > 0 && name.length > 0}">
					                    <li class="media" ng-repeat="search in searchResult" ng-switch="search.tp">
					                        <a ng-switch-when="USER" class="pull-left" data-ng-click="startConversation(search.id)">
					                            <img class="media-object thumb" data-ng-src="/get-mini-image-by-id/{{search.id}}"  alt="50x50" width="50"/>
					                        </a>
					                        
					                        <div class="media-body">
					                            
					                            <h5 class="media-heading">{{search.nm}}</h5>
					                            <p class="margin-none">{{search.tp}}</p>
					                        </div>
					                    </li>
					                </ul>
					            </div>
					        </div>
					    </form>
                            <!-- <a class="toolsbox toolsbox-end" href="#"><span class="icon-box icon-title-search"></span></a> -->
                        </div>  
                    </div>
                    <ul id="div" style="height:400px; overflow-y:scroll;">
                    <li ng-show="noMore == true">
                    <div data-ng-click="nextMessages()">Load Message</div>
                    </li>
                    	<div data-ng-repeat="msg in messages.slice().reverse()">
	                        <li class="message-user" ng-show="msg.suid == userInfo.id">
	                            <div>
	                                <img data-ng-src="/get-mini-image-by-id/{{msg.suid}}" style="height : 40px">
	                                <div ng-show="msg.hasImage" class="message-image">
	                                    <img src="/get-message-image-by-id/{{msg.imgs}}" />
	                                    <p ng-bind-html="msg.txt"><p>
	                                    <span class="message-timestamp">{{ msg.cd| date:'hh:mm a'}}</span>
	                                </div>
	                                <div ng-show="!msg.hasImage" class="message-text">
	                                	<p ng-bind-html="msg.txt"><p>
	                                    <span class="message-timestamp">{{ msg.cd| date:'hh:mm a'}}</span>
	                                </div>
	                            </div>
	                        </li>
	                        <li class="message-replier" ng-show="msg.suid != userInfo.id" >
	                            <div>
	                                <img data-ng-src="/get-mini-image-by-id/{{msg.suid}}" style="height : 40px">
	                                <div class="message-text">
	                                	<div ng-show="msg.hasImage"><img src="/get-message-image-by-id/{{msg.imgs}}" style="position: initial"/></div>
	                                     <p ng-bind-html="msg.txt"><p>
	                                    <span class="message-timestamp">{{ msg.cd| date:'hh:mm a'}}</span>
	                                </div>
	                            </div>
	                        </li>
                        </div>
                    </ul>
                    <div class="message-entry" style="height: 180px">
                        <form method="post" action="">
                        <div style="background-color: white; height:99px; width:100px" ng-show="selectedFiles != null">
							<img class="post-photo-preview" ng-class="{partial_fade: hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false" 
								ng-repeat="f in selectedFiles" tooltip-placement="bottom" tooltip="移除相片" data-ng-click="remove_image($index)"
								ng-show="dataUrls[$index]" ng-src="{{dataUrls[$index]}}"></div>
                            <label for="Input Message"></label>
                            <textarea rows="4" cols="70" name="message-inputfield" data-ng-model="messageText"></textarea>
                            <a href="#emo" id="message-emo-icon" class="icon-box icon-title-emo"></a>
                            <div id="message-emo-box">
                                <table border="0" cellspacing="0" cellpadding="0">
                                  <tr>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                  </tr>
                                  <tr>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                  </tr>
                                  <tr>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                    <td><a href="#"><img src="../assets/app/images/general/message_emo_icon/temp.png" /></a></td>
                                  </tr>
                                </table>
                            </div>
                            <div>
	                           <a ng-show="selectedFiles.length == 0"id="message-uploadphoto" data-ng-click="sendPhoto()"></a><a id="message-send" data-ng-click="sendMessage(messageText)"></a>
	                           <input style="visibility:hidden;display:inline-block;width:0px;height:0px;" id="send-photo-id" type="file"  name="send-photo" ng-file-select="onFileSelect($files)"/>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>
    <div id="back-to-top">
        <a href="#"><span class="icon-title-arrow-up"></span>Top</a>
    </div>
    
    
    <style>
    .emoticon{
		position: initial !important;    
    
    }
    </style>
                    